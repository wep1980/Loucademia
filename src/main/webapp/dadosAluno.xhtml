<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:jsf="http://xmlns.jcp.org/jsf"
	  lang="pt-br">
	  
	 <ui:composition template="layout.xhtml">
	 
	   <f:metadata> <!-- Quando a tela for carregada o JSF extrai a matricula que foi passada como parametro e copia para dentro do alunoBean.matricula, em seguida executa o metodo carregar que esta dentro do action -->
		     <f:viewParam name="matricula" value="#{alunoBean.matricula}" /> <!-- Atribui parametros que foram passados para dentro do Bean -->
		     <f:viewAction action="#{alunoBean.carregar}"/>
	   </f:metadata>
	   
	    <ui:define name="conteudo">
	    
			  <h1>#{alunoBean.titulo}</h1>
			  
			  <h:panelGroup rendered="#{!facesContext.messageList.isEmpty()}"> <!-- So aparece na tela se for verdadeira , facesContext -> objeto interno do JSF que acessa o contexto da requisição -->
				  <div id="infoMessage">
				    <h:messages /> <!-- Renderiza as mensagens -->
				  </div>
			  </h:panelGroup>
			  
			  <br/>
			  
			  <form jsf:id="form">
			     <input type="hidden" jsf:value="#{alunoBean.aluno.matricula}" />
				   <fieldset>
				     <legend>Dados pessoais</legend>
				   
				      <label for="nome">Nome</label> <br/> 
				      <input type="text" jsf:value="#{alunoBean.aluno.nome}" id="nome" /> <br/>
				      
				      <label for="sexo">Sexo</label> <br/> 
				      <select jsf:value="#{alunoBean.aluno.sexo}" id="sexo" size="0">
				         <f:selectItems value="#{dataBean.sexos}" />
				      </select> <br/>
				      
				      <label for="rg">RG</label> <br/> 
				      <input type="text" jsf:value="#{alunoBean.aluno.rg}" id="rg" /> <br/>
				      
				      <label for="dataDeNascimento">Data de Nascimento</label> <br/> 
				      <input type="date" jsf:value="#{alunoBean.aluno.dataNascimento}" id="dataDeNascimento">
				         <f:convertDateTime type="localDate" pattern="yyyy-MM-dd" /> <!-- Conversor de Data -->
				      </input> <br/>
				   </fieldset>
			  
			  <br/>
			  
			  <fieldset>
			    <legend>Situação</legend>
			    
			    <label for="situacao">Situação</label>
			    <select jsf:value="#{alunoBean.aluno.situacao}" id="situacao" size="0">
			       <f:selectItems value="#{dataBean.situacoes}" />
			    </select>
			  </fieldset>
			  
			  <br/>
			  
			  <fieldset>
			    <legend>Endereço</legend>
			 
			     <label for="rua">Rua</label> <br/> 
			     <input type="text" jsf:value="#{alunoBean.aluno.endereco.rua}" id="rua" /> <br/>
			     
			     <label for="numero">Número</label> <br/> 
			     <input type="text" jsf:value="#{alunoBean.aluno.endereco.numero}" id="numero" /> <br/>
			     
			     <label for="complemento">Complemento</label> <br/> 
			     <input type="text" jsf:value="#{alunoBean.aluno.endereco.complemento}" id="complemento" /> <br/>
			     
			     <label for="cidade">Cidade</label> <br/> 
			     <input type="text" jsf:value="#{alunoBean.aluno.endereco.cidade}" id="cidade" /> <br/>
			     
			     <label for="estado">Estado</label> <br/>
			     <select jsf:value="#{alunoBean.aluno.endereco.estado.sigla}" id="estado" size="0">
			       <f:selectItems value="#{dataBean.estados}" var="e" itemLabel="#{e.nome}" itemValue="#{e.sigla}"/> <!-- var="e" -> Variavel criada para acessar os atributos do Estado *** itemLabel="#{e.nome}" -> Nome do estado que aparecera na tela *** itemValue="#{e.sigla}" -> Valor que sera armazenado no servidor -->
			     </select> <br/>
			     
			     <label for="cep">CEP</label> <br/> 
			     <input type="text" jsf:value="#{alunoBean.aluno.endereco.cep}" id="cep" /> <br/>
			  </fieldset>
			  
			  <br/>
			  
			  <fieldset>
			    <legend>Contato</legend>
			    
			    <label for="email">E-mail</label><br/>
			    <input type="email" jsf:value="#{alunoBean.aluno.email}" id="email" /> <br/>
			    
			    <label for="telefoneCelularDDD">Telefone Celular</label> <br/>
			    <input type="tel" jsf:value="#{alunoBean.aluno.telefone.dddCelular}" id="telefoneCelularDDD" />&#160; <!-- &#160; -> Da uma espaço entre o DDD e o numero  -->
			    <input type="tel" jsf:value="#{alunoBean.aluno.telefone.numeroCelular}" id="telefoneCelularNumero" /> <br/>
			    
			    <label for="telefoneFixoDDD">Telefone Fixo</label> <br/>
			    <input type="tel" jsf:value="#{alunoBean.aluno.telefone.dddFixo}" id="telefoneFixoDDD" />&#160;
			    <input type="tel" jsf:value="#{alunoBean.aluno.telefone.numeroFixo}" id="telefoneFixoNumero" />
			    
			  </fieldset>
			  
			  <br/>
			  
			  <input type="submit" value="Cadastrar" jsf:action="#{alunoBean.cadastrar}"/>
			  <input type="button" value="Relatório de acessos"/>
			  
			  </form>
		  
		</ui:define>  
	</ui:composition>  

</html>		  